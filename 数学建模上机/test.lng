! =============  LINGO Code for Part A ============= ;

SETS:
   DAYS /1..7/;
   SHIFTS /1..5/;
ENDSETS

! ---------- 决策变量 x(d,s) ----------
! x(d,s) 表示“第 d 天在班次 s 上的护士数”。
! 要求 x(d,s) >= 0 且为整数:
! 在 LINGO 中用 @GIN() 来指定该变量是 General Integer.

MODEL:

  ! 声明决策变量:
  @FOR(DAYS(d):
    @FOR(SHIFTS(s):
      X(d,s) >= 0;
      @GIN( X(d,s) );
    );
  );

  ! ---------- 目标函数 ----------
  [Objective]
    MIN = @SUM(DAYS(d): @SUM(SHIFTS(s): X(d,s)));

  ! ========== 覆盖需求约束举例 ==========

  ! 1) 覆盖 6:00~10:00 (需求=18)
  !    由班次1(2:00-10:00) 和 班次2(6:00-14:00) 共同覆盖:
  @FOR(DAYS(d):
    X(d,1) + X(d,2) >= 18;
  );

  ! 2) 覆盖 10:00~14:00 (需求=20)
  !    由班次2(6:00-14:00) 和 班次3(10:00-18:00) 共同覆盖:
  @FOR(DAYS(d):
    X(d,2) + X(d,3) >= 20;
  );

  ! 3) 覆盖 14:00~18:00 (需求=19)
  !    由班次3(10:00-18:00) 和 班次4(14:00-22:00) 共同覆盖:
  @FOR(DAYS(d):
    X(d,3) + X(d,4) >= 19;
  );

  ! 4) 覆盖 18:00~22:00 (需求=17)
  !    由班次4(14:00-22:00) 和 班次5(18:00-2:00(次日)) 共同覆盖:
  @FOR(DAYS(d):
    X(d,4) + X(d,5) >= 17;
  );

  ! 5) 覆盖 22:00~6:00 (需求=12)
  !    由班次5(18:00-2:00) 和 班次1(2:00-10:00(次日)) 共同覆盖。
  !    需要处理“(次日)”的交叉: 当天 d 的班次5 + 第 d+1 天的班次1。
  !    d=7 时, d+1=8 对应回到 Day=1(循环):
  @FOR(DAYS(d):
    X(d,5) + X( @IF(d=7,1,d+1), 1 ) >= 12;
  );

END
